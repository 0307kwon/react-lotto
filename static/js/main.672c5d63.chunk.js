(this["webpackJsonpreact-lotto"]=this["webpackJsonpreact-lotto"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var s=n(2),a=n.n(s),c=n(12),r=n.n(c),i=n(1),l=n(4),u=n(6),o=n(5),b=function e(t,n){Object(i.a)(this,e),this.id=t,this.numbers=n},d=1e3,N=6,j=1,m=45,h={RANK:1,WINNING_COUNT:6,MONEY:2e9},O={RANK:2,WINNING_COUNT:5,MONEY:3e7},p={RANK:3,WINNING_COUNT:5,MONEY:15e5},x={RANK:4,WINNING_COUNT:4,MONEY:5e4},f={RANK:5,WINNING_COUNT:3,MONEY:5e3},g={INVALID_PAYMENT:"\uc62c\ubc14\ub978 \uae08\uc561\uc744 \uc785\ub825\ud574 \uc8fc\uc138\uc694."},v={HAS_DUPLICATED_NUMBER:"\uc911\ubcf5\uc778 \uc22b\uc790\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."},M={PAYMENT_INPUT:"payment-input",PAYMENT_SUBMIT:"payment-submit"},I=n(11),y=n.n(I),R=n(9),A=y.a.mark(C),_=function(e,t){return Math.round((1-Math.random())*(t-e))+e};function C(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:return t.next=4,e++;case 4:t.next=1;break;case 6:case"end":return t.stop()}}),A)}var w=C(),S=function(e){return new Intl.NumberFormat("ko-KR").format(e)},k=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"publishLotteries",value:function(e){return Array(e/d).fill(0).map((function(){var e=w.next().value,t=function(e){for(var t=e.min,n=e.max,s=e.size,a=new Set;a.size<s;)a.add(_(t,n));return Object(R.a)(a)}({min:j,max:m,size:N});return new b(e,t)}))}}]),e}(),E=n(13),T=n(3),K=function(){function e(){Object(i.a)(this,e)}return Object(l.a)(e,[{key:"getRankCount",value:function(e){var t,n=this,s=e.winningNumbers,a=e.bonusNumber,c=e.lotteries,r=(t={},Object(T.a)(t,h.RANK,0),Object(T.a)(t,O.RANK,0),Object(T.a)(t,p.RANK,0),Object(T.a)(t,x.RANK,0),Object(T.a)(t,f.RANK,0),t);return c.forEach((function(e){var t=n._getRank({winningNumbers:s,bonusNumber:a,lottery:e});t&&r[t]++})),r}},{key:"_getRank",value:function(e){var t,n,s=e.winningNumbers,a=e.bonusNumber,c=e.lottery,r=(t={},Object(T.a)(t,h.WINNING_COUNT,(function(){return h.RANK})),Object(T.a)(t,O.WINNING_COUNT,(function(e){return e?O.RANK:p.RANK})),Object(T.a)(t,x.WINNING_COUNT,(function(){return x.RANK})),Object(T.a)(t,f.WINNING_COUNT,(function(){return f.RANK})),t),i=c.numbers.includes(a);return null===(n=r[c.numbers.reduce((function(e,t){return s.includes(t)?++e:e}),0)])||void 0===n?void 0:n.call(r,i)}},{key:"getEarningRate",value:function(e,t){var n=t.length*d,s=this._calculateEarning(e,n)/n*100;return Number.isInteger(s)?s:s.toFixed(2)}},{key:"_calculateEarning",value:function(e,t){var n,s=(n={},Object(T.a)(n,h.RANK,h.MONEY),Object(T.a)(n,O.RANK,O.MONEY),Object(T.a)(n,p.RANK,p.MONEY),Object(T.a)(n,x.RANK,x.MONEY),Object(T.a)(n,f.RANK,f.MONEY),n);return Object.entries(e).reduce((function(e,t){var n=Object(E.a)(t,2),a=n[0],c=n[1];return e+s[a]*c}),-t)}}]),e}(),U=n(0),Y=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).handleNumberDisplay=function(){e.setState({isNumberVisible:!e.state.isNumberVisible})},e.state={isNumberVisible:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.isNumberVisible,t=this.props.lotteries;return Object(U.jsxs)("section",{className:"mt-9",children:[Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsxs)("label",{className:"flex-auto my-0",children:["\ucd1d ",t.length,"\uac1c\ub97c \uad6c\ub9e4\ud558\uc600\uc2b5\ub2c8\ub2e4."]}),Object(U.jsx)("div",{className:"flex-auto d-flex justify-end pr-1",children:Object(U.jsxs)("label",{className:"switch",children:[Object(U.jsx)("input",{type:"checkbox",onChange:this.handleNumberDisplay}),Object(U.jsx)("span",{className:"text-base font-normal",children:"\ubc88\ud638\ubcf4\uae30"})]})})]}),Object(U.jsx)("ul",{className:"d-flex pl-0 ".concat(e?"flex-col":""),children:t.map((function(t){return Object(U.jsxs)("li",{className:"d-flex items-center",children:[Object(U.jsx)("span",{className:"mx-1 text-4xl",children:"\ud83c\udf9f\ufe0f"}),Object(U.jsx)("span",{className:"ml-3 ".concat(e?"":"d-none"),children:t.numbers.join(", ")})]},t.id)}))})]})}}]),n}(s.Component),W=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).componentDidUpdate=function(e){s.props.isDisabled!==e.isDisabled&&(s.props.isDisabled||s.setState((function(){return{money:""}})))},s.handleInputCheck=function(e){var t=e.target.value;if(""!==t){s.setState({money:t});var n=s.props.isValidPayment(t)?"":g.INVALID_PAYMENT;s.setState({errorInputMessage:n})}else s.setState({money:""})},s.handleSubmit=function(e){e.preventDefault(),s.props.isValidPayment(s.state.money)?s.props.onMoneySubmit(s.state.money):s.setState({errorInputMessage:g.INVALID_PAYMENT})},s.state={money:"",errorInputMessage:""},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(U.jsxs)("form",{className:"mt-5",onSubmit:this.handleSubmit,children:[Object(U.jsx)("label",{className:"mb-2 d-inline-block",htmlFor:M.PAYMENT_INPUT,children:"\uad6c\uc785\ud560 \uae08\uc561\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsx)("input",{id:M.PAYMENT_INPUT,className:"w-100 mr-2 pl-2",type:"number",placeholder:"\uad6c\uc785 \uae08\uc561 (".concat(this.props.paymentMinUnit,"\uc6d0 \ub2e8\uc704)"),onChange:this.handleInputCheck,max:1e5,value:this.state.money,disabled:this.props.isDisabled}),Object(U.jsx)("button",{id:M.PAYMENT_SUBMIT,className:"btn btn-cyan",type:"submit",disabled:this.props.isDisabled,children:"\ud655\uc778"})]}),Object(U.jsx)("p",{children:this.state.errorInputMessage})]})}}]),n}(s.Component),D=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(e){var s;return Object(i.a)(this,n),(s=t.call(this,e)).handleSubmit=function(e){e.preventDefault();var t,n=[].concat(Object(R.a)(s.state.winningNumbers),[s.state.bonusNumber]);(t=n,new Set(t).size===t.length)?(s.setState({errorInputMessage:""}),s.setState({isSubmit:!0}),s.props.onWinningNumberSubmit(s.state.winningNumbers,s.state.bonusNumber)):s.setState({errorInputMessage:v.HAS_DUPLICATED_NUMBER})},s.handleWinningNumberChange=function(e){var t=e.target,n=Number(t.dataset.index),a=s.state.winningNumbers.map((function(e,s){return s!==n?e:Number(t.value)}));s.setState({winningNumbers:a})},s.handleBonusNumberChange=function(e){var t=e.target.value;s.setState({bonusNumber:t})},s.state={isSubmit:!1,winningNumbers:Array(N).fill(null),bonusNumber:null,errorInputMessage:""},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(U.jsxs)("form",{onSubmit:this.handleSubmit,className:"mt-9",children:[Object(U.jsx)("label",{className:"flex-auto d-inline-block mb-3",children:"\uc9c0\ub09c \uc8fc \ub2f9\ucca8\ubc88\ud638 6\uac1c\uc640 \ubcf4\ub108\uc2a4 \ub118\ubc84 1\uac1c\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."}),Object(U.jsxs)("div",{className:"d-flex",children:[Object(U.jsxs)("div",{children:[Object(U.jsx)("h4",{className:"mt-0 mb-3 text-center",children:"\ub2f9\ucca8 \ubc88\ud638"}),Object(U.jsx)("div",{children:this.state.winningNumbers.map((function(t,n){return Object(U.jsx)("input",{onChange:e.handleWinningNumberChange,"data-index":n,className:"winning-number mx-1 text-center",type:"number",min:j,max:m,required:!0,disabled:e.state.isSubmit},n)}))})]}),Object(U.jsxs)("div",{className:"bonus-number-container flex-grow",children:[Object(U.jsx)("h4",{className:"mt-0 mb-3 text-center",children:"\ubcf4\ub108\uc2a4 \ubc88\ud638"}),Object(U.jsx)("div",{className:"d-flex justify-center",children:Object(U.jsx)("input",{className:"bonus-number text-center",onChange:this.handleBonusNumberChange,type:"number",min:j,max:m,disabled:this.state.isSubmit,required:!0})})]})]}),Object(U.jsx)("p",{className:"mt-3",children:this.state.errorInputMessage}),Object(U.jsx)("button",{type:"submit",className:"open-result-modal-button mt-5 btn btn-cyan w-100",children:"\uacb0\uacfc \ud655\uc778\ud558\uae30"})]})}}]),n}(s.Component),P=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(U.jsx)("div",{className:"modal ".concat(this.props.isModalOpen?"open":""),children:Object(U.jsxs)("div",{className:"modal-inner p-10",children:[Object(U.jsx)("div",{className:"modal-close",onClick:this.props.closeModal,children:Object(U.jsx)("svg",{viewBox:"0 0 40 40",children:Object(U.jsx)("path",{className:"close-x",d:"M 10,10 L 30,30 M 30,10 L 10,30"})})}),this.props.children]})})}}]),n}(s.Component);var G=function(e){var t=e.winningResult,n=t.rankCount,s=t.earningRate;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("h2",{className:"text-center",children:"\ud83c\udfc6 \ub2f9\ucca8 \ud1b5\uacc4 \ud83c\udfc6"}),Object(U.jsx)("div",{className:"d-flex justify-center",children:Object(U.jsxs)("table",{className:"result-table border-collapse border border-black",children:[Object(U.jsx)("thead",{children:Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsx)("th",{className:"p-3",children:"\uc77c\uce58 \uac2f\uc218"}),Object(U.jsx)("th",{className:"p-3",children:"\ub2f9\ucca8\uae08"}),Object(U.jsx)("th",{className:"p-3",children:"\ub2f9\ucca8 \uac2f\uc218"})]})}),Object(U.jsxs)("tbody",{children:[Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsxs)("td",{className:"p-3",children:[f.WINNING_COUNT,"\uac1c"]}),Object(U.jsx)("td",{className:"p-3",children:S(f.MONEY)}),Object(U.jsxs)("td",{className:"modal__winning-count p-3","data-rank":"fifth",children:[n[f.RANK],"\uac1c"]})]}),Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsxs)("td",{className:"p-3",children:[x.WINNING_COUNT,"\uac1c"]}),Object(U.jsx)("td",{className:"p-3",children:S(x.MONEY)}),Object(U.jsxs)("td",{className:"modal__winning-count p-3","data-rank":"fourth",children:[n[x.RANK],"\uac1c"]})]}),Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsxs)("td",{className:"p-3",children:[p.WINNING_COUNT,"\uac1c"]}),Object(U.jsx)("td",{className:"p-3",children:S(p.MONEY)}),Object(U.jsxs)("td",{className:"modal__winning-count p-3","data-rank":"third",children:[n[p.RANK],"\uac1c"]})]}),Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsxs)("td",{className:"p-3",children:[O.WINNING_COUNT,"\uac1c + \ubcf4\ub108\uc2a4\ubcfc"]}),Object(U.jsx)("td",{className:"p-3",children:S(O.MONEY)}),Object(U.jsxs)("td",{className:"modal__winning-count p-3","data-rank":"second",children:[null===n||void 0===n?void 0:n[O.RANK],"\uac1c"]})]}),Object(U.jsxs)("tr",{className:"text-center",children:[Object(U.jsxs)("td",{className:"p-3",children:[h.WINNING_COUNT,"\uac1c"]}),Object(U.jsx)("td",{className:"p-3",children:S(h.MONEY)}),Object(U.jsxs)("td",{className:"modal__winning-count p-3","data-rank":"first",children:[n[h.RANK],"\uac1c"]})]})]})]})}),Object(U.jsxs)("p",{className:"modal__earning-rate text-center font-bold",children:["\ub2f9\uc2e0\uc758 \ucd1d \uc218\uc775\ub960\uc740 ",s,"%\uc785\ub2c8\ub2e4."]}),Object(U.jsx)("div",{className:"d-flex justify-center mt-5",children:Object(U.jsx)("button",{type:"button",className:"modal__restart-button btn btn-cyan",onClick:e.resetApp,children:"\ub2e4\uc2dc \uc2dc\uc791\ud558\uae30"})})]})},V=function(e){Object(u.a)(n,e);var t=Object(o.a)(n);function n(){var e;return Object(i.a)(this,n),(e=t.call(this)).onWinningNumberSubmit=function(t,n){var s=e.profitCalculator.getRankCount({winningNumbers:t,bonusNumber:n,lotteries:e.state.lotteries}),a=e.profitCalculator.getEarningRate(s,e.state.lotteries);e.setState({winningResult:{rankCount:s,earningRate:a},isResultModalOpen:!0})},e.closeResultModal=function(){e.setState({isResultModalOpen:!1})},e.resetApp=function(){e.setState({lotteries:[],winningResult:null,isResultModalOpen:!1})},e.lotteryMachine=new k,e.profitCalculator=new K,e.state={lotteries:[],winningResult:null,isResultModalOpen:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.lotteries,s=t.winningResult,a=t.isResultModalOpen;return Object(U.jsx)("div",{id:"app",className:"d-flex justify-center mt-5",children:Object(U.jsxs)("div",{className:"w-100",children:[Object(U.jsx)("h1",{className:"text-center",children:"\ud83c\udfb1 \ud589\uc6b4\uc758 \ub85c\ub610"}),Object(U.jsx)(W,{isDisabled:0!==n.length,onMoneySubmit:function(t){var n=e.lotteryMachine.publishLotteries(t);e.setState({lotteries:n})},isValidPayment:function(e){return e>0&&e%d===0},paymentMinUnit:d}),n.length>0&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(Y,{lotteries:n}),Object(U.jsx)(D,{onWinningNumberSubmit:this.onWinningNumberSubmit})]}),Object(U.jsx)(P,{isModalOpen:a,closeModal:this.closeResultModal,children:a&&Object(U.jsx)(G,{winningResult:s,resetApp:this.resetApp})})]})})}}]),n}(s.Component);n(20);r.a.render(Object(U.jsx)(a.a.StrictMode,{children:Object(U.jsx)(V,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.672c5d63.chunk.js.map